<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>اعتذارات وهولد</title>
<style>
 .madeby {
  position: fixed;
  top: 10px;
  right: 10px;
  color: #285eff; 
  background: #ffffffcc; 
  padding: 6px 14px;
  border-radius: 10px;
  font-size: 14px;
  font-family: 'Cairo', sans-serif;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
  opacity: 0.9;
  z-index: 99999;
  transition: opacity .6s ease, transform .6s ease, background .3s;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
}

.madeby:hover {
  opacity: 0;
  transform: translateY(-10px);
}

.madeby--hidden {
  opacity: 0;
  transform: translateY(-10px);
}


  @keyframes fadeIn {from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:none}}
  button {
    background: linear-gradient(45deg,#4b8cff,#72a9ff);
    border: none;
    color: white;
    padding: 10px 18px;
    border-radius: 10px;
    font-size: 15px;
    cursor: pointer;
    transition: .3s;
  }
  button:hover { transform: scale(1.05); background: linear-gradient(45deg,#3f7eff,#609dff); }
  .box {
    margin-top:14px;
    display: flex;
    justify-content: space-between;
    gap:10px;
  }
  .msg {
    background:#f3f7ff;
    border:1px solid #d8e5ff;
    border-radius:10px;
    padding:12px;
    flex:1;
    cursor:pointer;
    transition:.2s;
    min-height:90px;
    overflow-y:auto;
  }
  .msg:hover { background:#e9f1ff; }
  .popup {
    position: fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:#fff;
    border-radius:14px;
    box-shadow:0 8px 25px rgba(0,0,0,.2);
    padding:30px 40px;
    text-align:center;
    z-index:999;
    animation: pop .5s ease;
  }
  @keyframes pop {from{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}
  .hidden{display:none;}
  .popup button{margin-top:20px;}
  .calc-box {
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.calc-box input {
  padding: 12px;
  font-size: 16px;
  border-radius: 10px;
  border: 1px solid #c9dafd;
  outline: none;
  text-align: center;
  transition: .3s;
}
.calc-box input:focus {
  border-color: #5b8def;
  box-shadow: 0 0 0 3px #5b8def22;
}
.calc-buttons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
  gap: 10px;
}
.calc-result {
  background: #f3f7ff;
  border-radius: 10px;
  padding: 10px;
  font-weight: bold;
  text-align: center;
  border: 1px solid #e1e9ff;
}
.grid {
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: 12px 16px;
  align-items: center;
}
.call-box {
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 8px;
  background: #fff;
  color: #000;
  direction: ltr;
}
.actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 16px;
}
.btn {
  cursor: pointer;
  border: 1px solid #222;
  border-radius: 10px;
  padding: 10px 14px;
}
.btn.primary {
  background: #285eff;
  color: #fff;
  border: none;
}
textarea#output {
  width: 100%;
  min-height: 160px;
  resize: none;
  white-space: pre-wrap;
  border: 1px solid #c9dafd;
  border-radius: 10px;
  margin-top: 10px;
  padding: 10px;
}
.divider {
  margin: 20px 0;
  border: none;
  border-top: 1px solid #d8e5ff;
}

.solution {
  margin-top: 10px;
}

.solution-grid {
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: 10px 14px;
  align-items: center;
}

.solution-grid label {
  font-weight: 600;
  color: #285eff;
}

.solution-grid select,
.solution-grid input {
  padding: 8px;
  border: 1px solid #c9dafd;
  border-radius: 8px;
  font-size: 14px;
  outline: none;
}

.solution-grid select:focus,
.solution-grid input:focus {
  border-color: #5b8def;
  box-shadow: 0 0 0 2px #5b8def33;
}

.solution textarea {
  width: 100%;
  margin-top: 12px;
  min-height: 90px;
  resize: none;
  border: 1px solid #c9dafd;
  border-radius: 10px;
  padding: 8px;
}

.main-sections {
 display:flex;
       flex-wrap:nowrap;
       overflow-x:auto;
       gap:25px;
       justify-content:flex-start;
       align-items:flex-start;
       scroll-behavior:smooth;
       padding-bottom:10px;
      /* يخليهم يتكيفوا في الشاشات الصغيرة */
}

.section {
  flex: 1 1 300px; /* يخلي كل قسم ياخذ عرض مرن من 300px إلى المساحة المتاحة */
  max-width: 360px; /* كان 430، صغرناه */
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 8px 25px rgba(0,0,0,.08);
  padding: 24px;
  transition: all .4s ease;
  animation: fadeIn .8s ease;
}

.calculator-section {
  width: 100%;
  max-width: 600px;
  margin: 0 auto;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 8px 25px rgba(0,0,0,.08);
  padding: 24px;
  animation: fadeIn .8s ease;
}

</style>
</head>
<body>
  <div class="madeby">Made by Abdelrahman & Reem</div>
<div class="main-sections">
<!-- القسم الأيمن -->
<div class="section" id="apology">
  <h2 style="color:#285eff;">قسم الاعتذارات</h2>

  <h3 style="color:#285eff;">الاعتذارات الطويلة</h3>
  <button onclick="generate('longApology')">توليد اعتذار طويل</button>
  <div class="box">
    <div class="msg" id="longAr" onclick="copyText('longAr')"></div>
    <div class="msg" id="longEn" onclick="copyText('longEn')"></div>
  </div>
  <h3 style="color:#285eff;">الاعتذارات القصيرة</h3>
  <button onclick="generate('shortApology')">توليد اعتذار قصير</button>
  <div class="box">
    <div class="msg" id="shortAr" onclick="copyText('shortAr')"></div>
    <div class="msg" id="shortEn" onclick="copyText('shortEn')"></div>
 
  </div>
<!-- الآلة الحاسبة داخل قسم الاعتذارات -->
<div class="calc-box" style="margin-top: 20px; border-top: 1px solid #d8e5ff; padding-top: 16px;">
  <h3 style="color:#285eff; margin-bottom:8px; text-align:center;">🔢 الآلة الحاسبة</h3>
  <input id="calcInput" type="number" placeholder="أدخل الرقم" style="padding:10px;border:1px solid #c9dafd;border-radius:8px;width:100%;text-align:center;font-size:15px;">
  <div class="calc-buttons" style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px;">
    <button onclick="calc(0.8)">Main dish</button>
    <button onclick="calc(0.5)">Side dish</button>
    <button onclick="calc(0.3)">Drink</button>
    <button onclick="calc(0.1)">Cutlery</button>
  </div>
  <div id="calcResult" class="calc-result" style="background:#f3f7ff;border-radius:8px;padding:8px;margin-top:10px;text-align:center;font-weight:bold;border:1px solid #e1e9ff;">
    النتيجة: —
  </div>
</div>
</div>


<!-- القسم الأيسر -->
 
<div class="section" id="hold">
  <h2 style="color:#285eff;">قسم الهولد</h2>
  <button onclick="generate('hold')">توليد هولد</button>
  <div class="box">
    <div class="msg" id="holdAr" onclick="copyText('holdAr')"></div>
    <div class="msg" id="holdEn" onclick="copyText('holdEn')"></div>
  </div>
  <!-- كروت سكربتات ثابتة للهولد -->
<div class="fixed-hold-cards">
  <div class="hold-card" onclick="copyMsg(this)">
    ممكن دقيقة من فضلك عشان أشيك لك على الموضوع؟
شكراً على صبرك.


  </div>
  <div class="hold-card" onclick="copyMsg(this)">
   Could you please give me a minute to check on this for you? Thank you for your patience.
  </div>
</div>

<style>
.fixed-hold-cards {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}
.hold-card {
  flex: 1;
  background: #e8f1ff;
  border: 1px solid #e5efff;
  border-radius: 8px;
  padding: 10px;
  cursor: pointer;
  text-align: center;
  font-size: 13px;
  transition: 0.3s;
}
.hold-card:hover {
  background: #e5efff;
  transform: scale(1.03);
}
</style>
  
  <!-- قسم السولوشن -->
 <div class="card">
  <h2 style="color:#285eff;">قسم السولوشن </h2>

  <div class="grid">
    <!-- 🧩 Call Line -->
    <label for="callType">Call line</label>
    <select id="callType" onchange="toggleCallInput()">
      <option value="none">اختر نوع المكالمة</option>
      <option value="noneed"selected>No need</option>
      <option value="merchant">Merchant</option>
      <option value="rider">Rider</option>
    </select>

    <div id="callResultBox" style="display:none; grid-column: 1 / span 2;">
      <label for="callResult">Call Result</label>
      <input id="callResult" type="text" placeholder="اكتب نتيجة المكالمة هنا" />
    </div>

    <!-- 🧩 Risk Label -->
    <label for="riskLabel">Case Solution Risk Label</label>
    <select id="riskLabel" onchange="toggleRCOptions()">
      <option value="">Select</option>
      <option value="0RC"selected>0RC</option>
      <option value="1RC">1RC</option>
      <option value="2RC">2RC</option>
      <option value="3RC">3RC</option>
      <option value="3RC>">3RC></option>
      <option value="Red">Red</option>
      <option value="Purple">Purple</option>
    </select>

    <!-- 🔹 يظهر فقط مع Red أو Purple -->
    <div id="rcOptions" style="display:none; grid-column:1 / span 2; margin-top:8px;">
      <label style="font-weight:bold; color:#285eff;">اختر RC</label>
      <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top:6px;">
        <label><input type="radio" name="subRC" value="0RC">0RC</label>
        <label><input type="radio" name="subRC" value="1RC">1RC</label>
        <label><input type="radio" name="subRC" value="2RC">2RC</label>
        <label><input type="radio" name="subRC" value="3RC">3RC</label>
        <label><input type="radio" name="subRC" value="3RC>">3RC></label>
      </div>
    </div>

    <label for="evidence">Evidence</label>
    <select id="evidence">
      <option value="Clear" >Clear</option>
      <option value="Unclear"selected>Unclear</option>
    </select>

    <label for="receipt">Receipt</label>
    <select id="receipt">
      <option value="yes">yes</option>
      <option value="no">no</option>
      <option value="No need"selected>No need</option>
    </select>

    <label for="refund">Refund</label>
    <select id="refund">
      
      <option value="No refund"selected>No refund</option>
      <option value="Partial refund">Partial refund</option>
      <option value="Full refund">Full refund</option>
    </select>

    <label for="compensation">Compensation (قيمة التعويض لو مافي اتركها فاضيه)</label>
    <input id="compensation" type="text" inputmode="decimal" placeholder="اكتب المبلغ أو اتركها فاضية" />
  </div>

  <div class="actions">
    <button class="btn primary" id="build">صنع الحل</button>
    <button class="btn" id="clear">مسح</button>
  </div>

  <textarea id="output" readonly placeholder="بس تخلص اضغط علي"></textarea>
  <div class="hint">كبسه على الحقل ينسخ كلشي</div>
</div>
 </div>
  <!-- القسم الثالث -->
<!-- سكربتات المحادثة (نسخة مضغوطة) -->
<div class="section" id="chatScriptsSimple" style="width:500px; padding:16px;">
  <h2 style="text-align:center; color:#285eff; margin-bottom:12px;">سكربتات المحادثة</h2>

  <!-- الترحيب -->
  <div class="chat-block" style="background:#f1f6ff; border-radius:10px; padding:10px; margin-bottom:10px;">
    <h3 class="chat-title" style="color:#285eff;">👋 الترحيب</h3>
    <div class="chat-row">
      <div class="msg" onclick="copyMsg(this)">مرحبا كيف بقدر اساعدك اليوم؟</div>
      <div class="msg" onclick="copyMsg(this)">Hello, how can I help you today?</div>
    </div>
    <div class="chat-row">
      <div class="msg" onclick="copyMsg(this)">مرحبا انا هنا لمساعدتك</div>
      <div class="msg" onclick="copyMsg(this)">Hello, I am here to help you.</div>
    </div>
  </div>

  <!-- الاعتذار والتأكيد -->
  <div class="chat-block" style="background:#eaf9f3; border-radius:10px; padding:10px; margin-bottom:10px;">
    <h3 class="chat-title" style="color:#009a61;">🍽️ الاعتذار والتأكيد</h3>

   
    <div class="chat-row">
      <div class="msg" onclick="copyMsgWithRestaurant(this)">اسف جدًا على أي إزعاج صار معك. هل تقصد طلبك الأخير من مطعم (      ) ؟</div>
      <div class="msg" onclick="copyMsgWithRestaurant(this)">I’m very sorry for any inconvenience. Are you referring to your most recent order from the restaurant (      )?</div>
    </div>
    <div class="chat-row">
      <div class="msg" onclick="copyMsg(this)">أنا آسف جداً على المشكلة اللي حصلت لك</div>
      <div class="msg" onclick="copyMsg(this)">I am very sorry for the inconvenience you have experienced.</div>
    </div>
  </div>

  <!-- أي خدمة إضافية -->
  <div class="chat-block" style="background:#fff6e5; border-radius:10px; padding:10px; margin-bottom:10px;">
    <h3 class="chat-title" style="color:#c77b00;">❓ خدمة إضافية</h3>
    <div class="chat-row">
      <div class="msg" onclick="copyMsg(this)">اي خدمه ثانيه يمكنني مساعدتك بها عميلنا العزيز ؟</div>
      <div class="msg" onclick="copyMsg(this)">Is there anything else I can help you with?</div>
    </div>
    <div class="chat-row">
      <div class="msg" onclick="copyMsg(this)">مرحبًا. لم نتلق ردك بعد، وسيتم إغلاق المحادثة قريبًا. إذا كان عندك أي استفسار آخر، لا تتردد بالتواصل معنا.</div>
      <div class="msg" onclick="copyMsg(this)">Hello! We haven’t received your response yet. The chat will close soon. Feel free to contact us anytime.</div>
    </div>
  </div>

  <!-- الختامية -->
  <div class="chat-block" style="background:#f8eefc; border-radius:10px; padding:10px;">
    <h3 class="chat-title" style="color:#7b2cbf;">✅ الختامية</h3>
    <div class="chat-row">
      <div class="msg" onclick="copyMsg(this)">شكراً لتواصلك مع خدمة عملاء كيتا. نقدر تقييمك لخدمتنا ونتمنى لك يوماً سعيداً.</div>
      <div class="msg" onclick="copyMsg(this)">Thank you for contacting Keeta customer service. We’d appreciate your feedback. Have a great day!</div>
    </div>
  </div>
</div>

<style>
.chat-row {
  display: flex;
  justify-content: space-between;
  gap: 6px;
  margin-bottom: 6px;
}
.msg {
  background: #fff;
  border: 1px solid #d8e5ff;
  border-radius: 8px;
  padding: 6px 8px;
  flex: 1;
  font-size: 12px;
  line-height: 1.4;
  cursor: pointer;
  transition: 0.25s;
  min-height: 45px;
  display: flex;
  align-items: center;
}
.msg:hover {
  background: #e9f1ff;
  transform: scale(1.02);
}
.chat-title {
  margin-bottom: 6px;
  font-size: 14px;
  font-weight: bold;
}
</style>

<script>
function copyMsg(el) {
  navigator.clipboard.writeText(el.textContent.trim());
  el.style.background = "#cde6ff";
  setTimeout(() => (el.style.background = "#fff"), 350);
}

function copyMsgWithRestaurant(el) {
  const restaurant = document.getElementById('restaurantName').value.trim() || '';
  let text = el.textContent;
  if (restaurant) {
    text = text.replace('(      )', '(' + restaurant + ')');
  }
  navigator.clipboard.writeText(text.trim());
  el.style.background = "#cde6ff";
  setTimeout(() => (el.style.background = "#fff"), 350);
}
</script>
<!-- 🟦 القسم الرابع: التعويض والاسترداد -->
<div class="section" id="compensationSection" style="flex:1; min-width:350px; max-width:480px;">
  <h2 style="text-align:center; color:#285eff;"> قسم التعويض والاسترداد</h2>

  <div class="actions" style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-bottom:10px;">
    <button class="btn primary" onclick="startCompensation()">تعويض</button>
    <button class="btn" onclick="startRefund()">استرداد وتعويض</button>
  </div>

  <div id="scriptBox" style="margin-top:10px;"></div>
</div>

<script>
// دالة النسخ الذكية 👇
document.addEventListener("click", function (e) {
  const el = e.target.closest(".msgBox");
  if (!el) return;

  // النص الأصلي
  let text = el.textContent;

  // قراءة القيم من الحقول الحالية
  const refVal = document.querySelector("#refundValue")?.value.trim() || "";
  const compMain = document.querySelector("#compValue")?.value.trim() || "";
  const compAlt = document.querySelector("#compValue2")?.value.trim() || "";

  // استبدال الأقواس مهما كانت المسافات
  const matches = [...text.matchAll(/\([\s\S]*?\)/g)];
  if (matches.length) {
    if (matches[0]) text = text.replace(matches[0][0], `(${refVal || compMain || "—"})`);
    if (matches[1]) text = text.replace(matches[1][0], `(${compAlt || compMain || "—"})`);
  }

  // نسخ للنص النهائي
  navigator.clipboard.writeText(text.trim());

  // تأثير بسيط
  el.style.background = "#cde6ff";
  setTimeout(() => (el.style.background = "#fff"), 300);

  // إشعار النسخ
  showCopyAlert(e.pageX, e.pageY);
});

function showCopyAlert(x, y) {
  let note = document.getElementById("copyAlert");
  if (!note) {
    note = document.createElement("div");
    note.id = "copyAlert";
    note.textContent = "✔ تم النسخ";
    Object.assign(note.style, {
      position: "absolute",
      background: "#285eff",
      color: "#fff",
      padding: "5px 10px",
      borderRadius: "6px",
      fontSize: "13px",
      fontFamily: "Cairo, sans-serif",
      zIndex: "999999",
      opacity: "0",
      transition: "opacity .3s ease, transform .3s ease",
      pointerEvents: "none",
    });
    document.body.appendChild(note);
  }

  note.style.left = `${x + 15}px`;
  note.style.top = `${y - 10}px`;
  note.style.opacity = "1";
  note.style.transform = "translateY(-8px)";
  setTimeout(() => {
    note.style.opacity = "0";
    note.style.transform = "translateY(0)";
  }, 1000);
}

// 🔹 تعويض فقط

function startCompensation() {
  const box = document.getElementById('scriptBox');
  box.innerHTML = `
    <h2 style="color:#285eff;"> قسم التعويض</h2>

    <!-- سكربت عربي -->
    <div class="msgBox" onclick="copyText(this)" 
      style="background:#f7faff;border:1px solid #d6e4ff;
      padding:10px;margin-top:10px;border-radius:10px;cursor:pointer;">
      نأسف للإزعاج. نعتذر عن ذلك، وسنقوم بتعويضك بمبلغ إجمالي قدره (      ) ريال سعودي.
    </div>

    <!-- سكربت إنجليزي -->
    <div class="msgBox" onclick="copyText(this)" 
      style="background:#f7faff;border:1px solid #d6e4ff;
      padding:10px;margin-top:8px;border-radius:10px;cursor:pointer;">
      Sorry for the inconvenience. To express our apologies, we can apply total of (      ) SAR compensation to your account.
    </div>

    <!-- حقل القيمة -->
    <input type="number" id="compValue" placeholder="قيمة التعويض (اختياري)" 
      style="margin-top:12px;padding:8px;border:1px solid #ccc;
      border-radius:8px;width:90%;">

    <!-- 🔹 سكربتات المحفظة الخاصة بالتعويض -->
    <div class="msgBox" onclick="copyText(this)" 
      style="background:#eaf9f3;border:1px solid #cceedd;
      color:#006b3b;padding:10px;margin-top:16px;border-radius:10px;
      cursor:pointer;font-weight:500;">
     راح نضيف التعويض لمحفظة كيتا الخاصة بك على الفور. الرصيد ما له صلاحية وتقدر تستخدمه على الطلبات المؤهلة.
    </div>

    <div class="msgBox" onclick="copyText(this)" 
      style="background:#eaf9f3;border:1px solid #cceedd;
      color:#006b3b;padding:10px;margin-top:8px;border-radius:10px;
      cursor:pointer;font-weight:500;">
     Your compensation will be added to your Keeta wallet immediately. The balance won't expire and can be used for eligible orders.
    </div>

    <!-- زر إعادة -->
    <div style="text-align:center;margin-top:15px;">
      <button class="btn primary" 
        style="background:#285eff;color:#fff;border:none;
        padding:10px 20px;border-radius:8px;cursor:pointer;" 
        onclick="resetComp()">🔄 إعادة من البداية</button>
    </div>
  `;
}


// 🔸 استرداد وتعويض

function startRefund() {
  const box = document.getElementById('scriptBox');
  box.innerHTML = `
    <h2 style="color:#285eff;"> قسم الاسترداد والتعويض</h2>

    <!-- سكربت عربي -->
    <div class="msgBox" onclick="copyText(this)" 
      style="background:#f7faff;border:1px solid #d6e4ff;
      padding:10px;margin-top:10px;border-radius:10px;cursor:pointer;">
      نأسف للإزعاج. يمكننا استرداد مبلغ (      ) ريال سعودي لطلبك فورًا، 
      مع إضافة مبلغ إجمالي قدره (      ) ريال سعودي كتعويض.
    </div>

    <!-- سكربت إنجليزي -->
    <div class="msgBox" onclick="copyText(this)" 
      style="background:#f7faff;border:1px solid #d6e4ff;
      padding:10px;margin-top:8px;border-radius:10px;cursor:pointer;">
      Sorry for the inconvenience. We can refund (      ) SAR 
      and apply total of (      ) SAR compensation.
    </div>

    <!-- 🔹 الحقول -->
    <input type="number" id="refundValue" placeholder="قيمة الاسترداد" 
      style="margin-top:12px;padding:8px;border:1px solid #ccc;
      border-radius:8px;width:90%;">
    <input type="number" id="compValue2" placeholder="قيمة التعويض" 
      style="margin-top:8px;padding:8px;border:1px solid #ccc;
      border-radius:8px;width:90%;">

    <!-- 🔴 السكربتات الجديدة (لون أحمر) -->
    <div class="msgBox" onclick="copyText(this)" 
      style="background:#ffeaea;border:1px solid #ffb3b3;
      color:#b30000;padding:10px;margin-top:16px;border-radius:10px;
      cursor:pointer;font-weight:500;">
      أعتذر بصدق عن الإزعاج الذي تسببنا به. 
      سنقوم بمعالجة استرداد المبلغ إلى محفظتك على الفور، 
      وسيكون متاحًا مباشرة.<br>هل تفضل ذلك؟
    </div>

    <div class="msgBox" onclick="copyText(this)" 
      style="background:#ffeaea;border:1px solid #ffb3b3;
      color:#b30000;padding:10px;margin-top:8px;border-radius:10px;
      cursor:pointer;font-weight:500;">
      I sincerely apologize for the inconvenience caused. 
      We will process a refund to your wallet right away, 
      and it will be available immediately.<br>Do you prefer this?
    </div>

    <!-- 🔘 الأزرار -->
    <div style="margin-top:14px;">
      <button class="btn primary" 
        style="background:#285eff;color:#fff;border:none;
        padding:8px 18px;border-radius:8px;cursor:pointer;" 
        onclick="walletFlow()">محفظة</button>

      <button class="btn secondary" 
        style="background:#00b36b;color:#fff;border:none;
        padding:8px 18px;border-radius:8px;cursor:pointer;" 
        onclick="originalFlow()">الطريقة الأصلية</button>
    </div>

    <!-- 🔁 زر إعادة -->
    <div style="text-align:center;margin-top:15px;">
      <button class="btn primary" 
        style="background:#285eff;color:#fff;border:none;
        padding:10px 20px;border-radius:8px;cursor:pointer;" 
        onclick="resetComp()">🔄 إعادة من البداية</button>
    </div>
  `;
}


// 🔹 خيار المحفظة
function walletFlow() {
  document.getElementById('extraScripts')?.remove();
  const box = document.getElementById('scriptBox');
  const div = document.createElement('div');
  div.id = 'extraScripts';
  div.innerHTML = `
    <div class="msg" onclick="copyMsg(this)" style="background:#eaf9f3;">
راح نضيف التعويض لمحفظة كيتا الخاصة بك على الفور. الرصيد ما له صلاحية وتقدر تستخدمه على الطلبات المؤهلة.
    </div>
    <div class="msg" onclick="copyMsg(this)" style="background:#eaf9f3;">
Your compensation will be added to your Keeta wallet immediately. The balance won't expire and can be used for eligible orders.
    </div>
  `;
  box.appendChild(div);
}

// 🔸 خيار الطريقة الأصلية

function originalFlow() {
  // نحذف أي سكربتات مضافة مسبقًا
  document.getElementById('extraScripts')?.remove();

  const box = document.getElementById('scriptBox');

  // ننشئ الحاوية الجديدة
  const div = document.createElement('div');
  div.id = 'extraScripts';
  div.style.marginTop = '12px';
  div.style.display = 'grid';
  div.style.gap = '10px';

  // سكربتات الطريقة الأصلية الأساسية
  const mainScriptsHTML = `
    <div class="msg" onclick="copyMsg(this)" style="background:#fff6e5; border:1px solid #f7d9a2; padding:10px; border-radius:10px; cursor:pointer;">
      سيتم إرجاع المبلغ على نفس وسيلة الدفع، وقد يستغرق ظهوره حتى 10 أيام عمل.
    </div>
    <div class="msg" onclick="copyMsg(this)" style="background:#fff6e5; border:1px solid #f7d9a2; padding:10px; border-radius:10px; cursor:pointer;">
      The refund will be processed to your original payment method, and may take up to 10 business days.
    </div>
  `;

  // ✅ سكربتات إضافية (لون أحمر - حالة الاسترداد)
  const extraScriptHTML = `
    <div class="msg" onclick="copyMsg(this)" style="
      background:#ffeaea;
      border:1px solid #ffb3b3;
      color:#b30000;
      margin-top:18px;
      border-radius:10px;
      padding:10px;
      cursor:pointer;
      font-weight:500;
    ">
      لا يزال الاسترداد ضمن فترة المعالجة، نرجو منك الانتظار بصبر. يمكنك أيضًا الحصول على رقم ARN/RRN من قسم "تتبع استردادي" للتواصل مع بنكك المصدر والتحقق من حالة المبلغ.
    </div>

    <div class="msg" onclick="copyMsg(this)" style="
      background:#ffeaea;
      border:1px solid #ffb3b3;
      color:#b30000;
      border-radius:10px;
      padding:10px;
      cursor:pointer;
      font-weight:500;
    ">
      It's still within the refund process timeline, please wait patiently. You also can have the ARN/RRN in "track my refund" to contact your issuer bank to check the status of money.
    </div>
  `;

  // نجمع الكل
  div.innerHTML = mainScriptsHTML + extraScriptHTML;

  // نضيفهم بعد أزرار المحفظة والطريقة الأصلية مباشرة
  const buttons = box.querySelector('.action-buttons');
  if (buttons) {
    buttons.insertAdjacentElement('afterend', div);
  } else {
    box.appendChild(div);
  }
}

// 🔁 إعادة من البداية
function resetComp() {
  const box = document.getElementById('scriptBox');
  box.innerHTML = '';
}
</script>
</div> <!-- نهاية main-sections -->


<!-- popup -->
<div id="popup" class="popup hidden">
  <p id="popupMsg"></p>
  <button onclick="resetLists()">🔄 توليد من البداية</button>
</div>

<script>
const longApology = [
  {ar:`نعتذر من أعماق قلبنا عن أي إزعاج قد تسببت به تجربتك، ونحن نقدر تماماً مشاعرك. نحن نأخذ ملاحظاتك بكل جدية ونعمل جاهدين على نقلها إلى المطعم لتحسين الخدمة وتقديم الأفضل دائمًا. هدفنا هو أن نمنحك تجربة استثنائية تتناسب مع توقعاتك وتفوقها في المستقبل. نحن نسعى دائماً لإرضائك، ونتمنى أن نتمكن من استعادة ثقتك الغالية فينا. شكراً لك على دعمك وصبرك، وسنواصل العمل بجد ليكون مستوى تجربتك القادمة أفضل إن شاء الله.`, en:`We sincerely apologize for any inconvenience your experience may have caused, and we deeply value your feelings. We take your feedback very seriously and are working hard to pass it on to the restaurant to improve the service and provide the best at all times. Our aim is to offer you an exceptional experience that meets and exceeds your expectations in the future. We always strive to satisfy you, and we hope to regain your valuable trust in us. Thank you for your support and patience, and we will continue working hard so that your next experience will be at a better level, God willing.`},
  {ar:` نعتذر بصدق عن أي إزعاج قد تسببت به تجربتك معنا، ونقدر ملاحظاتك التي تساعدنا في التحسين. سيتم نقلها إلى المطعم للمساهمة في تقديم خدمة أفضل إن شاء الله. هدفنا هو أن نمنحك تجربة مميزة، ونسعى جاهدين لاستعادة ثقتك بنا. شكرًا لصبرك ودعمك، ونتطلع إلى خدمتك مجددًا بتجربة أفضل.`, en:`We sincerely apologize for any inconvenience your experience with us may have caused, and we truly value your feedback that helps us improve. It will be shared with the restaurant to contribute to providing better service, God willing. Our aim is to offer you a special experience that exceeds your expectations, and we strive to regain your trust. Thank you for your patience and support, and we look forward to serving you again with an even better experience.`},
  {ar:`نأسف لعدم تلبية توقعاتك هذه المرة، ونشكرك على إبلاغنا بملاحظاتك. نأخذ كل الملاحظات على محمل الجد ونعمل على تحسين خدماتنا باستمرار. نأمل أن تمنحنا فرصة أخرى لنقدم لك تجربة تفوق تطلعاتك في المستقبل. `, en:` We truly apologize if your experience did not meet your expectations. Customer satisfaction is at the heart of what we do, and we are constantly working on refining our service. We hope to have the opportunity to serve you again under better circumstances.`},
  {ar:`نحن آسفون لأن تجربتك لم تكن بالمستوى الذي نطمح إليه. نقدر ملاحظاتك ونعمل باستمرار على تطوير الخدمة. شكراً على تفهمك، ونتمنى أن نراك قريبًا بتجربة أكثر تميزًا`, en:`We are sorry that your experience was not at the level we strive for. We appreciate your feedback and continuously work on improving our service. Thank you for your understanding, and we hope to see you again soon with a more distinguished experience. `},
  {ar:` نعتذر من أعماق قلبنا عن أي إزعاج قد تسببت به تجربتك، ونحن نقدر تماماً مشاعرك. نحن نأخذ ملاحظاتك بكل جدية ونعمل جاهدين على نقلها إلى المطعم لتحسين الخدمة وتقديم الأفضل دائمًا. هدفنا هو أن نمنحك تجربة استثنائية تتناسب مع توقعاتك وتفوقها في المستقبل ان شاء الله.

`, en:`We sincerely apologize from the bottom of our hearts for any inconvenience your experience may have caused, and we truly value your feelings. We take your feedback very seriously and are working diligently to share it with the restaurant to improve the service and always deliver the best. Our goal is to provide you with an exceptional experience that meets and, God willing, exceeds your expectations in the future.

 `},
  {ar:`بنعتذر من حضرتك عميلنا العزيز نحن ملتزمون تماماً لإرضائك، ونتمنى أن نتمكن من استعادة ثقتك الغالية فينا. شكراً لك على دعمك وصبرك، وسنحرص على العمل بجد لتكون تجربتك القادمة أفضل ان شاء الله.

 `, en:`We sincerely apologize to you, our valued customer. We are fully committed to your satisfaction and hope to regain your precious trust in us. Thank you for your support and patience, and we promise to keep working hard to ensure that, God willing, your next experience will be much better.

 `},
  {ar:`اؤكد بأنني متفهم استياء حضرتك على التجربة الغير مرضية ونحن نقدم لك كامل الاعتذار، لقد تم أخذ ملاحظتك بعين الاعتبار، بتمنى تقبل اعتذارنا و ان لا يعكس أي انطباع سلبي. سنعمل على تحسين الخدمة بإذن الله عز وجل لك في المرات القادمة

 `, en:` We sincerely apologize for any inconvenience or disappointment you have encountered. We appreciate the time you took to share your feedback, as it helps us enhance our service. We hope to have the opportunity to serve you better in the future.

`},
  {ar:`نأسف لأن تجربتك لم تكن كما توقعت، فنحن نحرص على تقديم الأفضل دائمًا. ملاحظاتك ستساعدنا في التحسين، وسنسعى جاهدين لإرضائك. شكرًا لدعمك، ونتمنى أن تكون تجربتك القادمة أكثر راحة وسعادة.

 `, en:` We are sorry that your experience was not as you expected, as we always strive to provide the best. Your feedback will help us improve, and we will do our best to satisfy you. Thank you for your support, and we hope your next experience will be more comfortable and enjoyable.

`},
  {ar:`نعتذر عن أي إزعاج قد تسببت به هذه التجربة، فهدفنا هو تقديم خدمة ترضيك بالكامل. نحن نأخذ ملاحظاتك على محمل الجد ونعمل على تحسين الجودة باستمرار. شكراً لتفهمك، وسنبذل جهدنا لجعل تجربتك القادمة أكثر إرضاءً.

 `, en:` We are truly sorry for any disappointment you may have felt. Your experience is important to us, and we are implementing necessary improvements to prevent any recurrence of this issue. Thank you for your feedback and for allowing us the chance to enhance our service.

`},
  {ar:` نأسف لأي إزعاج قد واجهته، ونشكرك على ملاحظاتك القيمة. نحن نأخذ رضاك بجدية ونعمل باستمرار على تحسين مستوى الخدمة. نأمل أن تمنحنا فرصة أخرى لنقدم لك تجربة أفضل في المستقبل.

`, en:`We regret that your experience did not reflect the high standards we strive for. Please rest assured that we are working hard to prevent similar occurrences in the future. We greatly appreciate your understanding and the opportunity to make things better.

 `},
  {ar:`نعتذر عن أي تقصير حدث، ونتفهم أهمية تجربتك معنا. نحن نأخذ ملاحظاتك بعين الاعتبار لتحسين خدماتنا. شكراً لدعمك، ونسعى جاهدين لإرضائك مستقبلاً.

 `, en:` We apologize for any shortcomings and understand the importance of your experience with us. We take your feedback into account to improve our services. Thank you for your support, and we will strive to satisfy you in the future.

`},
  {ar:`نحن نأسف لأي تجربة غير مرضية، فهدفنا هو توفير خدمة ترقى إلى مستوى توقعاتك. نقدر ملاحظاتك وسنعمل على التحسين المستمر لإرضائك في المستقبل. شكراً لتفهمك، ونتمنى أن نراك قريبًا.

 `, en:` We apologize for any unsatisfactory experience, as our goal is to provide service that meets your expectations. We value your feedback and will work on continuous improvement to satisfy you in the future. Thank you for your understanding, and we hope to see you soon.

`},
  {ar:`نعتذر بصدق إذا لم تكن تجربتك بالمستوى الذي تأملته. نؤكد لك أن ملاحظاتك مهمة لنا، وسنعمل على تحسين الأمور لتكون تجربتك القادمة أفضل. نشكرك على دعمك ونتطلع إلى خدمتك مرة أخرى قريبًا.

 `, en:`We sincerely apologize if your experience was not at the level you expected. Please know that your feedback is important to us, and we will work on improving things to make your next experience better. Thank you for your support, and we look forward to serving you again soon.

 `},
  {ar:`نأسف لأي تجربة غير مرضية مررت بها. نحن ملتزمون بتقديم أفضل خدمة ممكنة وسنعمل على تحسينها بناءً على ملاحظاتك. نشكرك على ثقتك بنا ونتمنى أن نراك قريبًا بتجربة أكثر راحة وسعادة.

 `, en:` We deeply regret that we were unable to provide the seamless experience that you deserve. Please know that we are actively working to resolve any issues and ensure that future experiences meet and exceed your expectations. We truly appreciate your patience.

`},
  {ar:` نحن آسفون لأن تجربتك لم تكن بالمستوى الذي نطمح إليه. شكرًا لملاحظاتك، وهي محل اهتمامنا لتحسين جودة الخدمات. نقدر تفهمك ونتمنى أن تمنحنا فرصة لنقدم لك تجربة أفضل مستقبلاً.

`, en:` We understand that your time and satisfaction are valuable, and we apologize for any inconvenience you may have encountered. Please know that we take all feedback seriously and are continuously working to enhance our service to better meet your needs.

`},
  {ar:`نعتذر عن أي خلل قد واجهته خلال تجربتك، ونشكرك على إبلاغنا بذلك. رضاك هو أولويتنا ونسعى جاهدين لتحسين الخدمة مستقبلاً. نتمنى أن تمنحنا فرصة أخرى لنثبت لك مدى التزامنا برضاك.

 `, en:` We apologize for any issues you encountered during your experience, and we thank you for bringing them to our attention. Your satisfaction is our priority, and we strive to improve our service in the future. We hope you give us another opportunity to show you our commitment to your satisfaction.

`},
  {ar:` نأسف لأي تقصير قد حدث، فهدفنا هو توفير تجربة مثالية لعملائنا. نحن نعمل بجد لتحسين الخدمة بناءً على ملاحظاتك. شكراً لصبرك، ونتمنى أن تكون تجربتك القادمة أكثر راحة ان شاء الله.

`, en:`We apologize for any shortcomings that may have occurred, as our goal is to provide an ideal experience for our customers. We are working hard to improve the service based on your feedback. Thank you for your patience, and we hope your next experience will be more comfortable.

 `},
  {ar:`نعتذر بصدق عن أي إزعاج حدث خلال طلبك، فنحن نسعى دائمًا لتقديم الأفضل. ملاحظاتك محل اهتمامنا، وسنسعى لتحسين التجربة لإرضائك مستقبلاً. شكراً لدعمك، ونتمنى أن نراك قريبًا.

 `, en:` We sincerely apologize for any inconvenience during your order, as we always strive to provide the best. Your feedback is important to us, and we will work to improve the experience to satisfy you in the future. Thank you for your support, and we hope to see you soon.

`},
  {ar:`نأسف لأن تجربتك لم تكن كما توقعت، وسنعمل على تحسين خدماتنا لتفادي تكرار ذلك إن شاء الله. شكراً لوقتك وثقتك بنا، وسنسعى جاهدين لتقديم تجربة مرضية لك مستقبلاً.

 `, en:`We are sorry that your experience was not as you expected, and we will work on improving our services to prevent this from happening again, God willing. Thank you for your time and trust in us, and we will strive to provide you with a satisfactory experience in the future.

 `},
  {ar:`نعتذر عن أي تجربة غير مرضية قد مررت بها، ونعمل على تحسين الخدمة بناءً على ملاحظاتك. نشكرك على تفهمك، و سنحرص على أن تكون تجربتك القادمة أكثر راحة.

 `, en:`  We’re truly sorry for any inconvenience caused. We understand this wasn’t ideal and are committed to improving your experience next time. Thank you for trusting us.

`},
  {ar:`نعتذر عن أي تقصير قد واجهته، وسنعمل على تحسين خدماتنا لإرضائك قدر الإمكان. شكراً لك على ملاحظاتك القيمة، ونتمنى أن تمنحنا فرصة أخرى لخدمتك بشكل أفضل.

 `, en:` We apologize for any shortcomings you may have experienced, and we will work on improving our services to satisfy you as much as possible. Thank you for your valuable feedback, and we hope you give us another opportunity to serve you better.

`},
  {ar:`نأسف لأي إزعاج قد سبّبته تجربتك معنا، وسنسعى بتحسين الخدمة لتكون على مستوى توقعاتك. نشكر لك تفهمك، ونتمنى أن نراك مجددًا في تجربة أكثر راحة وسعادة.

 `, en:` We are truly sorry that your recent order did not go as expected. Your trust is important to us, and we are dedicated to improving our service based on your valuable feedback. Please accept our apologies, and we hope to provide you with a much smoother experience in the future.

`},
  {ar:` نحن نأسف لأي قصور قد حدث أثناء تجربتك، وندرك تمامًا مدى أهمية تقديم خدمة مميزة تلبي تطلعاتك. رضاك هو حجر الأساس الذي نبني عليه خدماتنا، ولذلك فإننا نأخذ جميع الملاحظات على محمل الجد ونعمل جاهدين على تحسين التجربة لتقديم مستوى عالٍ من الجودة مستقبلاً. نشكر لك تفهمك وثقتك بنا، ونسعى باستمرار لجعل كل تجربة لك معنا أفضل من السابقة.

`, en:` We are sorry for any shortcomings you may have experienced, and we fully recognize the importance of providing outstanding service that meets your expectations. Your satisfaction is the foundation upon which we build our services, which is why we take all feedback seriously and work hard to improve the experience to deliver a high level of quality in the future. Thank you for your understanding and trust, and we continuously strive to make each experience with us better than the last.

`},
  {ar:`نأسف بشدة لأي تجربة غير مرضية قد واجهتها، ونتفهم تمامًا مدى الإحباط الذي قد تشعر به عند عدم الحصول على الخدمة بالمستوى المتوقع. نحن نعمل بجد لتحسين الجودة والاستجابة السريعة للملاحظات الخاصة بعملائنا، وسنسعى جاهدين لجعل تجربتك القادمة أكثر سلاسة وراحة. نشكرك على تفهمك، ونتطلع إلى خدمتك قريبًا بطريقة تليق بثقتك بنا.

 `, en:` We deeply regret any unsatisfactory experience you may have had, and we fully understand the frustration of not receiving service at the expected level. We are working hard to improve quality and respond promptly to our customers’ feedback, and we will strive to make your next experience smoother and more comfortable. Thank you for your understanding, and we look forward to serving you soon in a manner worthy of your trust.

`},
  {ar:`نتفهم تمامًا أنك كنت تتوقع تجربة أفضل، ونحن نأسف لأننا لم نرتقِ إلى مستوى تطلعاتك هذه المرة. نقدّر صبرك وملاحظاتك التي تساعدنا على التطوير، ونعمل بلا توقف لتحسين الخدمة لتكون أكثر سلاسة وجودة إن شاء الله. نأمل أن تمنحنا فرصة أخرى لنثبت لك أننا نستحق ثقتك، ونتطلع لأن تكون تجربتك القادمة معنا أكثر راحة ورضا.

 `, en:` We fully understand that you expected a better experience, and we are sorry that we did not meet your expectations this time. We appreciate your patience and feedback, which help us improve, and we continuously work to enhance the service to make it smoother and of higher quality, God willing. We hope you give us another opportunity to show that we deserve your trust, and we look forward to your next experience with us being more comfortable and satisfying.

`},
];

const shortApology = [
 {ar:`نعتذر يا الغالي عن التجربة اللي ما كانت بالمستوى، وراح نحرص تكون القادمة أفضل بإذن الله.`, en:`We’re sorry your experience wasn’t great, we’ll make sure the next one is better insha’Allah.`},
{ar:`آسفين إذا واجهت أي إزعاج، ملاحظتك تهمنا وراح نحسن الخدمة للأفضل.`, en:`Sorry for the inconvenience — your feedback matters and we’ll improve our service.`},
{ar:`نأسف إن التجربة ما كانت مثل توقعاتك، وراح نعمل على تحسينها مستقبلاً.`, en:`We’re sorry it didn’t meet your expectations, we’ll make it better next time.`},
{ar:`نعتذر عن القصور، ونتفهم ملاحظاتك وراح نطور الخدمة قريب إن شاء الله.`, en:`We apologize for the shortfall and we’ll work on improving soon, God willing.`},
{ar:`نأسف لو سبّبنا لك أي إزعاج، هدفنا دايمًا رضاك وتقديم الأفضل.`, en:`We’re sorry for any inconvenience — our goal is always your satisfaction.`},
{ar:`نعتذر منك، بنحرص نكسب رضاك ونستعيد ثقتك فينا.`, en:`Our apologies, we’ll work to regain your trust and satisfaction.`},
{ar:`نأسف على التجربة، وراح نراجع الملاحظات لضمان تحسين الخدمة.`, en:`Sorry about your experience — we’ll review your feedback to improve our service.`},
{ar:`نعتذر عن اللي صار، وراح نسعى تكون تجربتك القادمة أسهل وأفضل.`, en:`We’re sorry about what happened — we’ll make your next experience smoother.`},
{ar:`نأسف لأي تقصير، بنشتغل دايم على رفع الجودة وتطوير الخدمة.`, en:`Apologies for the shortfall — we’re constantly improving our quality.`},
{ar:`آسفين على اللي صار، وشاكرين ملاحظاتك اللي تساعدنا نتحسن.`, en:`Sorry about what happened, your feedback helps us improve.`},
{ar:`نعتذر على أي خلل، وراح نعمل على تحسين تجربتك القادمة بإذن الله.`, en:`We apologize for any issue and we’ll improve your next experience insha’Allah.`},
{ar:`نأسف على التجربة الغير مرضية، وراح نعمل على تطوير الخدمة بشكل مستمر.`, en:`Sorry for the unsatisfactory experience — we’ll keep improving our service.`},
{ar:`نعتذر إذا ما كانت التجربة بالمستوى، وراح نحسن الأمور لرضاك.`, en:`Sorry if it wasn’t as expected — we’ll make things right for you.`},
{ar:`نأسف على أي إزعاج، وراح نتابع الملاحظات لضمان الأفضل.`, en:`Apologies for any inconvenience — we’ll follow up to ensure better service.`},
{ar:`نعتذر عن التقصير، وملاحظتك بتفيدنا في تحسين الخدمة أكثر.`, en:`Sorry for any shortcomings — your feedback helps us get better.`},
{ar:`آسفين على التجربة، وشكرًا لتفهمك وثقتك.`, en:`Sorry about the experience, and thank you for your understanding and trust.`},
{ar:`نعتذر إذا واجهت مشكلة، ونعمل نتأكد إنها ما تتكرر.`, en:`We’re sorry for the issue and will make sure it doesn’t happen again.`},
{ar:`نأسف لأي قصور، وبنحرص تكون المرات الجاية مرضية لك أكثر.`, en:`Apologies for any shortfall — we’ll make sure next time is better.`},
{ar:`نعتذر عن الإزعاج، وملاحظتك محل اهتمام الفريق.`, en:`Sorry for the inconvenience — your feedback is being reviewed by the team.`},
{ar:`نأسف إذا التجربة ما كانت بالمستوى، ونتمنى فرصة نعوضك فيها.`, en:`We’re sorry it wasn’t up to standards — we hope to make it up to you.`},
{ar:`نعتذر عن أي تقصير، وراح نطور الأداء بناءً على ملاحظتك.`, en:`We apologize for any shortfall — we’ll improve our performance accordingly.`},
{ar:`نأسف لو الخدمة ما كانت ترضيك، وراح نحرص تكون الجاية أريح وأسرع.`, en:`Sorry if the service wasn’t satisfying — we’ll make it smoother next time.`},
{ar:`نعتذر على التجربة الغير مرضية، وهدفنا نخدمك بشكل أفضل الجاية.`, en:`Sorry for the disappointing experience — our goal is to serve you better next time.`},
{ar:`نأسف لأي خلل صار، ونعمل على تحسين التجربة القادمة.`, en:`We’re sorry for any issue, and we’ll enhance your next experience.`},
{ar:`نعتذر على اللي حصل، وثقتك تهمنا ونسعى نحافظ عليها.`, en:`Apologies for what happened — your trust matters and we’ll keep it.`},
{ar:`نأسف إن التجربة ما كانت مثالية، ووعدنا لك إن الجاية تكون أفضل بإذن الله.`, en:`Sorry the experience wasn’t perfect — we promise the next one will be better, God willing.`}
];

const hold = [
  // 🔟 الأصلية بدون أي تعديل
  { ar: `ممكن دقيقة من فضلك عشان أشيك لك على الموضوع؟ شكراً على صبرك.`, en: `Could you please give me a minute to check on this for you? Thank you for your patience.` },
  { ar: `أحتاج إلى دقيقة إضافية لإنهاء العمل المطلوب، وأقدّر تفهمك.`, en: `I need an extra minute to complete the required task, and I appreciate your understanding.` },
  { ar: `سأستغرق دقيقة أخرى للتحقق من التفاصيل، شكرًا على صبرك.`, en: `I will take another minute to verify the details. Thank you for your patience.` },
  { ar: `أحتاج إلى دقيقة إضافية الآن، لكن قد أضطر لطلب وقت إضافي حسب المستجدات.`, en: `I need an additional minute now, but I might have to request more time depending on the updates.` },
  { ar: `ما زال لدي بعض الأمور التي تحتاج إلى دقيقة أخرى للمراجعة، شاكر لتفهمك.`, en: `There are still some matters that require another minute for review. I appreciate your understanding.` },
  { ar: `أحتاج إلى دقيقة أخرى في هذه المرحلة، وإذا احتجت وقتًا إضافيًا سأعلمك.`, en: `I need one more minute at this stage, and I will let you know if I require additional time.` },
  { ar: `سأستغرق دقيقة أخرى في الوقت الحالي، وإذا احتجت إلى وقت إضافي سأخبرك.`, en: `I will take another minute for now, and I’ll inform you if I need more time.` },
  { ar: `الرجاء الانتظار دقيقة أخرى حتى أتمكن من إنهاء العمل المطلوب بشكل دقيق، شكرًا لتفهمك.`, en: `Please wait one more minute so I can complete the task accurately. Thank you for your understanding.` },
  { ar: `أحتاج إلى دقيقة إضافية الآن، وإذا لم يكتمل الأمر فقد أطلب وقتًا إضافيًا لاحقًا.`, en: `I need an extra minute now, and if the matter is not completed, I may request additional time later.` },
  { ar: `أحتاج إلى دقيقة أخرى لاستكمال العمل على أكمل وجه، واشكرك على تعاونك.`, en: `I need another minute to complete the task properly, and I appreciate your cooperation.` },

  // ➕ إضافات جديدة بنفس الأسلوب
  { ar: `ممكن دقيقة إضافية لو سمحت حتى أتأكد من التفاصيل النهائية.`, en: `May I please have another minute to double-check the final details?` },
  { ar: `أحتاج دقيقة واحدة فقط لأراجع آخر التحديثات قبل ما أرجع لك.`, en: `I just need one minute to review the latest updates before I get back to you.` },
  { ar: `ممكن دقيقة واحدة بس أتحقق من النظام وأوافيك بالنتيجة.`, en: `Could you please give me a minute to check the system and provide you the result?` },
  { ar: `أحتاج دقيقة إضافية لأتأكد من جميع النقاط المطلوبة بدقة.`, en: `I need an extra minute to make sure all points are reviewed accurately.` },
  { ar: `أشيّك على الحالة الآن، وراح أرجع لك بعد دقيقة بالتأكيد النهائي.`, en: `I’m checking the case now and will get back to you within a minute with the final confirmation.` },
  { ar: `لو سمحت، أحتاج دقيقة إضافية للتأكد من الإجراءات الجارية.`, en: `Please, I need one more minute to confirm the ongoing process.` },
  { ar: `أتحقق من الملاحظات الآن وراح أبلغك خلال دقيقة بالنتيجة.`, en: `I’m reviewing the notes now and will update you within a minute with the result.` },
  { ar: `ممكن دقيقة فقط للتأكد من كل شيء قبل أبلغك بالتفاصيل النهائية.`, en: `Just one minute please to make sure everything is clear before I share the final details.` }
];

let used = {longApology:[], shortApology:[], hold:[]};

function generate(type){
  let list = eval(type);
  let remain = list.filter((_,i)=>!used[type].includes(i));
  if(remain.length===0){
    document.getElementById('popup').classList.remove('hidden');
    document.getElementById('popupMsg').textContent = `🎉 تم عرض كل ${type==='hold'?'الهولد':'الاعتذارات'}، يمكنك البدء من جديد.`;
    return;
  }
  let randomIndex = Math.floor(Math.random()*remain.length);
  let idx = list.indexOf(remain[randomIndex]);
  used[type].push(idx);
  if(type==='hold'){
    showText('holdAr','holdEn',list[idx]);
  }else if(type==='shortApology'){
    showText('shortAr','shortEn',list[idx]);
  }else{
    showText('longAr','longEn',list[idx]);
  }
}

function showText(idAr,idEn,obj){
  document.getElementById(idAr).textContent=obj.ar;
  document.getElementById(idEn).textContent=obj.en;
}

function copyText(id){
  const el=document.getElementById(id);
  navigator.clipboard.writeText(el.textContent);
  el.style.background="#d8ecff";
  setTimeout(()=>el.style.background="#f3f7ff",400);
}

function resetLists(){
  used={longApology:[], shortApology:[], hold:[]};
  document.getElementById('popup').classList.add('hidden');
}
function calc(rate){
  const input = document.getElementById('calcInput').value;
  const result = document.getElementById('calcResult');
  if(!input || isNaN(input)){
    result.textContent = 'الرجاء إدخال رقم صالح';
    return;
  }
  const total = (input * rate).toFixed(2);
  result.textContent = `النتيجة: ${total}`;
}
  const el = (id) => document.getElementById(id);
const CALL_LINE = "Call merchant ,call results ; needed Restaurant admitted the mistake";
const COMP_LINE = "no Compensation";

function isNumericOrEmpty(v) {
  if (!v) return true;
  return /^-?\d+(\.\d+)?$/.test(v.trim());
}

function buildTemplate() {
  const selectedRC = getSelectedRC();
const riskLabelLine = `Case Solution Risk Label: ${selectedRC || '—'}`;
  const evidence   = el('evidence').value;
  const receipt    = el('receipt').value;
  const callType   = el('callType').value;
  const callResult = (el('callResult').value || '').trim();
  let refund       = (el('refund').value || '').trim();
  let compensation = (el('compensation').value || '').trim();

 if (!refund) {
  refund = "no refund";
}
  if (!isNumericOrEmpty(compensation)) {
    alert('حقل Compensation يجب أن يحتوي رقمًا فقط أو يترك فارغًا.');
    el('compensation').focus();
    return;
  }

  if (!refund) refund = "no refund";
  if (!compensation) compensation = "no compensation";

  // بناء نص الكول لاين
  // بناء نص الكول لاين
let callLine = "";
let normalizedCall = callType.toLowerCase().replace(/\s+/g, "");

if (normalizedCall === "noneed") {
  callLine = "Call merchant/Rider , Call result : No need";
} else if (normalizedCall === "merchant") {
  if (!callResult) {
    alert("اكتب نتيجة المكالمة مع التاجر.");
    return;
  }
  callLine = `Call merchant , Call result : ${callResult}`;
} else if (normalizedCall === "rider") {
  if (!callResult) {
    alert("اكتب نتيجة المكالمة مع السائق.");
    return;
  }
  callLine = `Call rider , Call result : ${callResult}`;
} else {
  callLine = "Call merchant/Rider , Call result : No need";
}

  const lines = [
    `Call line: ${callLine}`,
    `Case Solution Risk Label: (${risk})RC`,
    `Evidence: ${evidence}`,
    `Receipt: ${receipt}`,
    `Refund: (${refund}) `,
    `Compensation: (${compensation}) `
  ];

  el('output').value = lines.join("\n");
}

function clearAll() {
  el('riskLabel').value = '0';
  el('evidence').value = 'Clear';
  el('receipt').value = 'yes';
  el('refund').value = '';
  el('output').value = '';
}

el('output').addEventListener('click', () => {
  el('output').select();
  document.execCommand('copy');
  alert("✔ تم النسخ بنجاح");
});

el('build').addEventListener('click', buildTemplate);
el('clear').addEventListener('click', clearAll);
function toggleCallInput(){
  const callType = el('callType').value;
  const box = document.getElementById('callResultBox');
  if(callType === "merchant" || callType === "rider"){
    box.style.display = "grid";
  } else {
    box.style.display = "none";
    el('callResult').value = "";
  }
 function toggleCallInput() {
  const callType = el('callType').value;
  const box = document.getElementById('callResultBox');
  if (callType === "merchant" || callType === "rider") {
    box.style.display = "grid";
  } else {
    box.style.display = "none";
    el('callResult').value = "";
  }
}

function toggleRCOptions() {
  const val = document.getElementById('riskLabel').value;
  const box = document.getElementById('rcOptions');

  if (val === 'Red' || val === 'Purple') {
    box.style.display = 'block';

    // ✅ يحدد أول خيار (0RC) تلقائيًا
    const firstRC = document.querySelector('input[name="subRC"][value="0RC"]');
    if (firstRC) firstRC.checked = true;

  } else {
    box.style.display = 'none';
    document.querySelectorAll('input[name="subRC"]').forEach(i => (i.checked = false));
  }
}

function getSelectedRC() {
  const main = document.getElementById('riskLabel').value;
  if (main === 'Red' || main === 'Purple') {
    const sub = document.querySelector('input[name="subRC"]:checked');
    return sub ? `${sub.value} (${main})` : `${main}`;
  }
  return main || '';
}

function buildTemplate() {
  const selectedRC = getSelectedRC();
  const riskLabelLine = `Case Solution Risk Label: ${selectedRC || '—'}`;
  const evidence   = el('evidence').value;
  const receipt    = el('receipt').value;
  const callType   = el('callType').value;
  const callResult = (el('callResult').value || '').trim();
  const refund     = el('refund').value;
  let compensation = (el('compensation').value || '').trim();

  if (!compensation) compensation = "no compensation";

  let callLine = "";
  if (callType === "noneed") {
    callLine = "Call merchant/Rider , Call result : No need";
  } else if (callType === "merchant") {
    if (!callResult) {
      alert("اكتب نتيجة المكالمة مع التاجر.");
      return;
    }
    callLine = `Call merchant , Call result : ${callResult}`;
  } else if (callType === "rider") {
    if (!callResult) {
      alert("اكتب نتيجة المكالمة مع السائق.");
      return;
    }
    callLine = `Call rider , Call result : ${callResult}`;
  } else {
    alert("اختَر نوع المكالمة أولاً.");
    return;
  }

  const lines = [
    ` ${callLine}`,
    riskLabelLine,
    `Evidence: ${evidence}`,
    `Receipt: ${receipt}`,
    `Refund: (${refund})`,
    `Compensation: (${compensation}) compensation`
  ];

  el('output').value = lines.join("\n");
}

el('build').addEventListener('click', buildTemplate);
el('clear').addEventListener('click', () => {
  el('riskLabel').value = '';
  el('evidence').value = 'Clear';
  el('receipt').value = 'yes';
  el('refund').value = '';
  el('compensation').value = '';
  el('output').value = '';
  toggleRCOptions(); // يخفي الحقل عند المسح
});
}
// ✅ لإظهار حقل RC فقط عند اختيار Red أو Purple
function toggleRCOptions() {
  const val = document.getElementById('riskLabel').value;
  const box = document.getElementById('rcOptions');
  if (val === 'Red' || val === 'Purple') {
    box.style.display = 'grid';
  } else {
    box.style.display = 'none';
    document.querySelectorAll('input[name="subRC"]').forEach(i => i.checked = false);
  }
}

// ✅ لبناء النص النهائي في التيمبليت
function getSelectedRC() {
  const main = document.getElementById('riskLabel').value;
  if (main === 'Red' || main === 'Purple') {
    const sub = document.querySelector('input[name="subRC"]:checked');
    return sub ? `${sub.value} (${main})` : `${main}`;
  }
  return main || '';
}
window.addEventListener("DOMContentLoaded", () => {
  document.getElementById("callType").value = "noneed";
  toggleCallInput();
});
</script>
<script>
// ✅ إشعار "تم النسخ بنجاح" لكل الموقع + إصلاح النسخ في كل الأقسام
window.addEventListener("load", () => {
  // إنشاء الإشعار
  let notice = document.createElement("div");
  notice.id = "copyNotice";
  notice.textContent = "✔ تم النسخ بنجاح";
  Object.assign(notice.style, {
    position: "fixed",
    top: "45px",
    right: "20px",
    background: "#e8fff3",
    color: "#00b36b",
    padding: "8px 16px",
    borderRadius: "8px",
    boxShadow: "0 3px 10px rgba(0,0,0,0.1)",
    fontSize: "13px",
    fontFamily: "Cairo, sans-serif",
    opacity: "0",
    zIndex: "999999",
    transition: "opacity 0.4s ease, transform 0.4s ease",
    transform: "translateY(-10px)"
  });
  document.body.appendChild(notice);

  // دالة عرض الإشعار
  window.showCopiedNotice = function() {
    notice.style.opacity = "1";
    notice.style.transform = "translateY(0)";
    clearTimeout(window.noticeTimeout);
    window.noticeTimeout = setTimeout(() => {
      notice.style.opacity = "0";
      notice.style.transform = "translateY(-10px)";
    }, 1000); // ← مدة الظهور = ثانية واحدة
  };

  // ✅ نربط الحدث لجميع العناصر القابلة للنسخ
  function enableCopying() {
    document.querySelectorAll(".msg, .msgBox, textarea#output, .fixed-msg").forEach(el => {
      el.onclick = () => {
        const text = el.value || el.textContent.trim();
        if (!text) return;
        navigator.clipboard.writeText(text);
        showCopiedNotice();
      };
    });
  }

  // نفعّل النسخ أول مرة
  enableCopying();

  // 🎯 لو تمت إضافة عناصر جديدة (مثل عند إنشاء سكربت جديد)
  const observer = new MutationObserver(enableCopying);
  observer.observe(document.body, { childList: true, subtree: true });

  // ✅ لو أي نص انسخ بالطريقة العادية (Ctrl+C)
  document.addEventListener("copy", showCopiedNotice);
});
</script>
 <!-- 🟦 نافذة التحديث (Popup) -->
<div id="updatePopup" style="
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999999;
  font-family: 'Cairo', sans-serif;
">
  <div style="
    background: #fff;
    padding: 25px 30px;
    border-radius: 14px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.15);
    width: 380px;
    max-width: 90%;
    text-align: center;
    animation: fadeIn .4s ease;
  ">
  <h2 style="color:#285eff; margin-bottom:10px;">اللهم  هوّن على أهلنا في غزة وانصرهم وآمن روعاتهم
السلام  عَلى غزَّة بِما فيها، بِكُل ما فيها</h2>
    <h2 style="color:#285eff; margin-bottom:10px;">شو عملنا جديد</h2>
   <ul id="updateText" style="color:#333; font-size:14px; line-height:1.8; text-align:right; list-style-position: inside;">
      <li>ما في داعي تحدد اي سكربت عشان تنسخه فقط ضغطه عليه راح يتم نسخه</li>
      <li> ضفنا قسم جديد الاسترداد والتعويض داخله حقول بتقدر تدخل القيمه وهو بحطها الك بالقوس</li>
       <li>لما تضغط على اي سكربت راح يظهرلك اشعار نسخ</li>
       <li>بتقدر تتواصل معي باي وقت بخصوص اي فكره ممكن تساعدنا بالشغل  </li>
</ul>
    <button onclick="closePopup()" style="
      background:#285eff;
      color:#fff;
      border:none;
      padding:8px 18px;
      border-radius:8px;
      margin-top:15px;
      cursor:pointer;
      font-size:14px;
    ">تخطي</button>
  </div>
</div>

<script>
  // 🎬 إغلاق النافذة عند الضغط على "تخطي"
  function closePopup() {
    const popup = document.getElementById('updatePopup');
    popup.style.opacity = 0;
    popup.style.pointerEvents = 'none';
    setTimeout(() => popup.remove(), 400);
  }
</script>

<style>
@keyframes fadeIn {
  from {opacity: 0; transform: scale(0.95);}
  to {opacity: 1; transform: scale(1);}
}
</style>
</body>
</html>
